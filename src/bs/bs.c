/*************************************************************************/
/*                                                                       */
/*   SNU-RT Benchmark Suite for Worst Case Timing Analysis               */
/*   =====================================================               */
/*                              Collected and Modified by S.-S. Lim      */
/*                                           sslim@archi.snu.ac.kr       */
/*                                         Real-Time Research Group      */
/*                                        Seoul National University      */
/*                                                                       */
/*                                                                       */
/*        < Features > - restrictions for our experimental environment   */
/*                                                                       */
/*          1. Completely structured.                                    */
/*               - There are no unconditional jumps.                     */
/*               - There are no exit from loop bodies.                   */
/*                 (There are no 'break' or 'return' in loop bodies)     */
/*          2. No 'switch' statements.                                   */
/*          3. No 'do..while' statements.                                */
/*          4. Expressions are restricted.                               */
/*               - There are no multiple expressions joined by 'or',     */
/*                'and' operations.                                      */
/*          5. No library calls.                                         */
/*               - All the functions needed are implemented in the       */
/*                 source file.                                          */
/*                                                                       */
/*                                                                       */
/*************************************************************************/
/*                                                                       */
/*  FILE: bs.c                                                           */
/*  SOURCE : Public Domain Code                                          */
/*                                                                       */
/*  DESCRIPTION :                                                        */
/*                                                                       */
/*     Binary search for the array of 15 integer elements.               */
/*                                                                       */
/*  REMARK :                                                             */
/*                                                                       */
/*  EXECUTION TIME :                                                     */
/*                                                                       */
/*                                                                       */
/*************************************************************************/

#include "support.h"

/* This scale factor will be changed to equalise the runtime of the
   benchmarks. */
#define SCALE_FACTOR    (REPEAT_FACTOR >> 0)


struct DATA {
  int  key;
  int  value;
}  ;

#ifdef SMALL_D
  #define NUMELEMS 18
#elif defined(LARGE_D)
  #define NUMELEMS 250
#else
  //medium
  #define NUMELEMS 120
#endif

#ifdef SMALL_D
  struct DATA data[NUMELEMS] = { {1, 100},
	     {5,200},
	     {6, 300},
	     {7, 700},
	     {8, 900},
	     {9, 250},
	     {10, 400},
	     {11, 600},
	     {12, 800},
	     {13, 1500},
	     {14, 1200},
	     {15, 110},
	     {16, 140},
	     {17, 133},
	     {18, 10} };
#elif defined(LARGE_D)
  struct DATA data[NUMELEMS] = {{1, 1507}, {2, 1466}, {3, 4730}, {4, 3789}, {5, 3493}, {6, 4549}, {7, 1630}, {8, 3740}, {9, 2260}, {10, 720}, {11, 1700}, {12, 3522}, {13, 3349}, {14, 3402}, {15, 3252}, {16, 1086}, {17, 4171}, {18, 4642}, {19, 2324}, {20, 3432}, {21, 4641}, {22, 4950}, {23, 4332}, {24, 2284}, {25, 592}, {26, 242}, {27, 4445}, {28, 4905}, {29, 1534}, {30, 4340}, {31, 4311}, {32, 759}, {33, 2706}, {34, 324}, {35, 4335}, {36, 889}, {37, 2436}, {38, 2764}, {39, 2505}, {40, 4446}, {41, 4558}, {42, 569}, {43, 2650}, {44, 836}, {45, 1957}, {46, 1705}, {47, 2110}, {48, 1298}, {49, 1412}, {50, 1542}, {51, 1020}, {52, 569}, {53, 1517}, {54, 957}, {55, 2807}, {56, 2470}, {57, 4870}, {58, 3614}, {59, 3025}, {60, 2884}, {61, 2660}, {62, 4014}, {63, 1371}, {64, 4600}, {65, 4473}, {66, 4041}, {67, 4584}, {68, 934}, {69, 3428}, {70, 702}, {71, 910}, {72, 3871}, {73, 1732}, {74, 1684}, {75, 30}, {76, 2700}, {77, 4355}, {78, 3174}, {79, 643}, {80, 778}, {81, 3807}, {82, 1103}, {83, 1377}, {84, 1094}, {85, 1939}, {86, 2608}, {87, 4361}, {88, 769}, {89, 277}, {90, 4032}, {91, 4564}, {92, 500}, {93, 3643}, {94, 253}, {95, 1959}, {96, 2198}, {97, 2721}, {98, 2446}, {99, 2691}, {100, 1801}, {101, 4791}, {102, 2658}, {103, 4682}, {104, 4252}, {105, 3060}, {106, 3737}, {107, 2507}, {108, 4195}, {109, 3907}, {110, 2213}, {111, 994}, {112, 3787}, {113, 2864}, {114, 4712}, {115, 1683}, {116, 3344}, {117, 4361}, {118, 359}, {119, 1198}, {120, 1250}, {121, 2096}, {122, 2418}, {123, 632}, {124, 1668}, {125, 1379}, {126, 2091}, {127, 209}, {128, 2104}, {129, 1978}, {130, 1031}, {131, 3899}, {132, 2827}, {133, 4762}, {134, 1593}, {135, 4122}, {136, 1440}, {137, 2955}, {138, 280}, {139, 2383}, {140, 3690}, {141, 3891}, {142, 150}, {143, 2478}, {144, 693}, {145, 4956}, {146, 2174}, {147, 3922}, {148, 3351}, {149, 2857}, {150, 3674}, {151, 4357}, {152, 1657}, {153, 3405}, {154, 3989}, {155, 1006}, {156, 4984}, {157, 4789}, {158, 3473}, {159, 2708}, {160, 4192}, {161, 699}, {162, 1779}, {163, 627}, {164, 2588}, {165, 714}, {166, 119}, {167, 2550}, {168, 337}, {169, 4102}, {170, 4882}, {171, 2556}, {172, 934}, {173, 4537}, {174, 1528}, {175, 4946}, {176, 3720}, {177, 2267}, {178, 3168}, {179, 3549}, {180, 3245}, {181, 1969}, {182, 2622}, {183, 4885}, {184, 4470}, {185, 3837}, {186, 13}, {187, 1257}, {188, 2436}, {189, 2482}, {190, 177}, {191, 2478}, {192, 1032}, {193, 2841}, {194, 240}, {195, 2867}, {196, 2931}, {197, 4631}, {198, 2731}, {199, 3103}, {200, 1580}, {201, 1832}, {202, 3518}, {203, 4729}, {204, 1396}, {205, 1311}, {206, 1651}, {207, 3404}, {208, 3941}, {209, 4980}, {210, 4946}, {211, 502}, {212, 907}, {213, 2803}, {214, 741}, {215, 1272}, {216, 4216}, {217, 4581}, {218, 827}, {219, 1582}, {220, 4372}, {221, 1666}, {222, 2980}, {223, 4220}, {224, 512}, {225, 676}, {226, 3853}, {227, 4827}, {228, 4246}, {229, 4831}, {230, 4285}, {231, 1788}, {232, 4473}, {233, 4753}, {234, 3202}, {235, 3865}, {236, 1858}, {237, 4452}, {238, 377}, {239, 3871}, {240, 4527}, {241, 4721}, {242, 1280}, {243, 1483}, {244, 872}, {245, 381}, {246, 4140}, {247, 3119}, {248, 1025}, {249, 4636}, {250, 100}};

#else
  //medium
  struct DATA data[NUMELEMS] = {{1, 77}, {2, 3310}, {3, 3899}, {4, 1438}, {5, 3270}, {6, 4352}, {7, 4270}, {8, 1882}, {9, 257}, {10, 4089}, {11, 4935}, {12, 4716}, {13, 1938}, {14, 960}, {15, 727}, {16, 3417}, {17, 661}, {18, 435}, {19, 227}, {20, 3239}, {21, 1340}, {22, 3824}, {23, 4621}, {24, 184}, {25, 3674}, {26, 4144}, {27, 747}, {28, 1403}, {29, 3953}, {30, 2077}, {31, 4498}, {32, 614}, {33, 507}, {34, 1652}, {35, 4867}, {36, 2825}, {37, 770}, {38, 1371}, {39, 3856}, {40, 427}, {41, 97}, {42, 2184}, {43, 3125}, {44, 2513}, {45, 2920}, {46, 3873}, {47, 4751}, {48, 1077}, {49, 578}, {50, 1136}, {51, 707}, {52, 1645}, {53, 2158}, {54, 4881}, {55, 3707}, {56, 1715}, {57, 4988}, {58, 3041}, {59, 870}, {60, 3352}, {61, 13}, {62, 3512}, {63, 1266}, {64, 1193}, {65, 4115}, {66, 4654}, {67, 3764}, {68, 4121}, {69, 1624}, {70, 1156}, {71, 2773}, {72, 2845}, {73, 645}, {74, 4998}, {75, 1396}, {76, 1708}, {77, 1558}, {78, 2619}, {79, 4252}, {80, 1060}, {81, 30}, {82, 420}, {83, 693}, {84, 1689}, {85, 132}, {86, 1173}, {87, 3466}, {88, 4899}, {89, 4719}, {90, 3979}, {91, 2892}, {92, 1013}, {93, 40}, {94, 4928}, {95, 2509}, {96, 254}, {97, 4681}, {98, 4738}, {99, 3735}, {100, 3209}, {101, 4306}, {102, 3243}, {103, 4527}, {104, 3312}, {105, 3365}, {106, 3767}, {107, 180}, {108, 1105}, {109, 2859}, {110, 3090}, {111, 3416}, {112, 4319}, {113, 4521}, {114, 4928}, {115, 611}, {116, 4206}, {117, 1258}, {118, 1591}, {119, 1601}, {120, 1907}};
#endif

binary_search(x)
{
  int fvalue, mid, up, low ;

  low = 0;
  up = 14;
  fvalue = -1 /* all data are positive */ ;
  while (low <= up) {
    mid = (low + up) >> 1;
    if ( data[mid].key == x ) {  /*  found  */
      up = low - 1;
      fvalue = data[mid].value;
    }
    else  /* not found */
      if ( data[mid].key > x ) 	{
	up = mid - 1;
      }
      else   {
             	low = mid + 1;
      }
  }
  return fvalue;
}


int
main (void)
{
  int i;

  initialise_board ();
  start_trigger ();

  for (i = 0; i < SCALE_FACTOR; i++)
    binary_search(8);

  stop_trigger ();
  return 0;
}
